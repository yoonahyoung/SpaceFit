<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<!-- 댓글 신고 -->
	<entry key="reportCommentReview">
		INSERT
		  INTO TB_REPORT
		    (
		       RPT_NO
		     , MEM_NO
		     , RPT_MEM_NO
		     , RPT_REASON_NO
		     , RPT_REF_CAT
		     , RPT_REF_NO
		     , RPT_DATE
		    )
		VALUES
		    (
		       SEQ_RPTNO.NEXTVAL
		     , ?
		     , ?
		     , ?
		     , 2  
		     , ?
		     , SYSDATE
		    )
	</entry>
	
	<entry key="adminSelectList">
		SELECT 
		        DISTINCT M.MEM_ID  AS "RPT_MEM_ID",        
		        R.RPT_REF_NO AS "RPT_REF_NO",   
		        CASE WHEN R.RPT_REF_CAT = 1 THEN '후기'
		            WHEN R.RPT_REF_CAT = 2 THEN '댓글'          
		        END "CATEGORY",    
		        COUNT
		  FROM TB_REPORT R
		  JOIN TB_MEMBER M ON (M.MEM_NO = R.RPT_MEM_NO) 
		  JOIN VW_REPORTCOUNT RC ON(R.RPT_REF_NO = RC.RPT_REF_NO)
	</entry>
	
	<!-- 오늘 후기신고 건수 -->
	<entry key="todayRvCount">
		 SELECT NVL(COUNT(*), 0) AS "TODAY_REVIEW_COUNT"
		   FROM TB_REPORT
		  WHERE TO_CHAR(RPT_DATE, 'YY/MM/DD') = TO_CHAR(SYSDATE, 'YY/MM/DD')
		    AND RPT_REF_CAT = '1'
	</entry>
	
	<!-- 총 후기신고건수 -->
	<entry key="totalRvCount">
		 SELECT NVL(COUNT(*), 0) AS "TOTAL_REVIEW_COUNT"
		   FROM TB_REPORT
		  WHERE  RPT_REF_CAT = '1'
	</entry>
	
	<!-- 오늘 댓글신고 건수 -->
	<entry key="todayCmCount">
		 SELECT NVL(COUNT(*), 0) AS "TODAY_COMMENT_COUNT"
		   FROM TB_REPORT
		  WHERE TO_CHAR(RPT_DATE, 'YY/MM/DD') = TO_CHAR(SYSDATE, 'YY/MM/DD')
		    AND RPT_REF_CAT = '2'
	</entry>
	
	<!-- 총 댓글 신고건수 -->
	<entry key="totalCmCount">
		 SELECT NVL(COUNT(*), 0) AS "TOTAL_COMMECT_COUNT"
		   FROM TB_REPORT
		  WHERE RPT_REF_CAT = '2'
	</entry>
	
	<!-- 가장 많은 신고를 당한 작성자 -->
	<entry key="maxMemId">
		SELECT MEM_ID 
		  FROM (SELECT RPT_MEM_NO 
		          FROM TB_REPORT
		         GROUP
		            BY RPT_MEM_NO
		        HAVING COUNT(*) = (SELECT MAX(COUNT)
		                             FROM ( SELECT COUNT(*) AS "COUNT", RPT_MEM_NO
		                                      FROM TB_REPORT
		                                     GROUP BY RPT_MEM_NO))) 
		 JOIN TB_MEMBER M ON (RPT_MEM_NO = M.MEM_NO)  
	</entry>


</properties>